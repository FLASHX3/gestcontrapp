
        $dateActuelle = date_create();      // Date actuelle
        $dateActuelle->setTime(0, 0, 0);
        $compte =  0;       //nombre de contrat à surveiller


$dateFinContratString = $resultat['date_fin_contrat'];

                                    $dateFinContrat = date_create($dateFinContratString);
                                    $dateFinContrat->setTime(0, 0, 0);
                                    $diff = date_diff($dateFinContrat, $dateActuelle);
                                    $diff = $diff->format('%a');
                                    if ($dateActuelle == $dateFinContrat) {       //La date d'expiration est aujourd'hui
                                        $compte++;
                                    } else if ($dateActuelle < $dateFinContrat) {
                                        if ($diff > 7) {   // date d'expiration encore loin

                                        } else {      // Date d'expiration en approche (-7jours)
                                            $compte++;
                                        }
                                    } else if ($dateActuelle > $dateFinContrat) {      // Date d'expiration passée
                                        $compte++;
                                    }